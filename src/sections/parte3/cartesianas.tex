\documentclass[../main.tex]{subfiles}

\begin{document}

\section{Semântica Categorial da Teoria dos Tipos Simples}

Essa seção é uma forma de escrever a semântica categorial da teoria dos tipos simples, mais especificamente $\lambda1_{(\times)}$, usando o raciocínio sobre categorias descrito por \cite{lambek1988} como \emph{sistema dedutivo} (em inglês, \emph{Deductive System}).

Então, primeiro será definido esse sistema dedutivo junto com sua codificação das Categorias Cartesianas Fechadas e depois, em cima desse sistema, será feita a prova que $\lambda1_{(\times)}$ forma uma CCC.

\subsection{O Sistema Dedutivo de Lambek}

\subsubsection{O cálculo proposicional como um sistema dedutivo}

Primeiro, é necessário começar com a definição de um sistema dedutivo:

\begin{definition}[Sistema dedutivo, \cite{lambek1988}]
    Um \emph{sistema dedutivo} é um grafo com:

    \begin{enumerate}[label=(R1\alph*)]
        \item uma seta específica
    $$A \xrightarrow{1_A} A$$
        \item uma operação binária entre setas
        \begin{prooftree}
            
            \AxiomC{$A \xrightarrow{f} B$}
            \AxiomC{$B \xrightarrow{g} C$}
            \BinaryInfC{$A \xrightarrow{gf} C$}
        \end{prooftree}
        chamada de \emph{composição}
    \end{enumerate}
\end{definition}

Na lógica, os objetos de um sistema dedutivo são chamados de \emph{formulas}, as setas de \emph{provas} (ou \emph{deduções}) e uma operação entre setas como uma \emph{regra de inferência}.

A nomeclatura $Rx$ indica que essa regra será considerada a regra de número $x$ da exposição.

\begin{definition}[Calculo de Conjunção, \cite{lambek1988}]
    Um \emph{cálculo de conjunções} é um sistema dedutivo que possui somente o valor verdade $\top$ e o operador de conjunção $\land$. Essas duas novas entradas seguem junto as próximas regras:
    \begin{enumerate}
        \item[R2] $A \xrightarrow{\bigcirc_A } \bot$
        \item[R3a] $A \land B \xrightarrow{\pi_1(A, B)} A$
        \item[R3a] $A \land B \xrightarrow{\pi_2(A, B)} B$
        \item[R4]
            \AxiomC{$C \xrightarrow{f} A$}
            \AxiomC{$C \xrightarrow{f} B$}
            \BinaryInfC{$C \xrightarrow{\langle f, g \rangle} A \land B$}
            \DisplayProof
    \end{enumerate}
\end{definition}

Nessa definição, ao invés de $\pi_{A, B}$ e $\pi_{A, B}^{'}$, foi preferido usar a notação $\pi_1(A, B)$ e $\pi_2(A, B)$ por se assemelhar ao que foi visto de teoria das categorias até então.

Exemplo: prova da comutatividade para a conjunção:

\begin{prooftree}
    \AxiomC{$A \land B \xrightarrow{\pi_2(A, B)} B$}
    \AxiomC{$A \land B \xrightarrow{\pi_1(A, B)} A$}
    \BinaryInfC{$A \land B \xrightarrow{\langle \pi_2(A, B), \pi_1(A, B) \rangle} B \land A$}
\end{prooftree}

Essa prova poderia simplesmente ser escrita, sem precisar da regra no formato de árvore como $\langle \pi_2(A, B), \pi_1(A, B) \rangle$ ou somente $\langle \pi_2, \pi_1 \rangle$ quando a origem está subentendida.

Exemplo2: Associatividade da conjunção:

A associatividade $\alpha_{A, B, C} : (A \land B) \land C \to A \land (B \land C)$ é dada por:

$$\alpha_{A, B, C} \equiv \langle \pi_1(A, B)\pi_1(A \land B, C), \langle \pi_2(A, B)\pi_1(A\land B, C), \pi_2(A \land B, C) \rangle \rangle$$

É possível compor operações e provas para obter regras derivativas de inferência, por exemplo:

\begin{prooftree}
    \AxiomC{$A \land C \xrightarrow{\pi_1(A, C)} A$}
    \AxiomC{$A \xrightarrow{f} B$}
    \BinaryInfC{$A \land C \to D$}
    \AxiomC{$A \land C \xrightarrow{\pi_2(A, C)} C$}
    \AxiomC{$C \xrightarrow{g} D$}
    \BinaryInfC{$A \land C \to B$}
    \BinaryInfC{$A \land C \xrightarrow{f \land g} B \land D$}
\end{prooftree}

Essa árvore de inferência descreve o mesmo que:

$$f \land g = \langle f \pi_1(A, C), g \pi_2(A, C) \rangle$$

ou simplesmente:

\begin{prooftree}
    \AxiomC{$A \xrightarrow{f} B$}
    \AxiomC{$C \xrightarrow{g} D$}
    \BinaryInfC{$A \land C \xrightarrow{f \land g} B \land D$}
\end{prooftree}

\begin{definition}[Cálculo proposicional positivo, \cite{lambek1988}]
    Um \emph{cálculo proposicional intuicionistico positivo} é um cálculo de conjunção com a oepração binária adicional $\Rightarrow$ (implicação). Da implicação seguem mais duas regras:
    \begin{enumerate}
        \item[R4a] $(B \Rightarrow A) \land B \xrightarrow{\mathcal{E}(A, B)} A$
        \item[R4b] \AxiomC{$C \land B \xrightarrow{h} A$}
        \UnaryInfC{$C \xrightarrow{h^{\ast}} B \Rightarrow A$}
        \DisplayProof
    \end{enumerate}
\end{definition}

Uma escolha do autor dessas notas é reverter a escolha de Lambek de colocar a implicação sendo $B \Leftarrow A$. A escolha de Lambek foi feita para fazer uma associação com o conjunto $B^A$ de funções entre $A$ e $B$ (com o codomínio vindo primeiro e depois o domínio).

É possível derivar, com essas duas regras, as seguintes outras duas regras:

\begin{enumerate}
    \item[R'4b] $C \xrightarrow{\eta(C, B)} B \Rightarrow (C \land B)$
    \item[R'4C] \AxiomC{$D \xrightarrow{g} A$}
    \UnaryInfC{$B \Rightarrow D \xrightarrow{1_B \Rightarrow g} B \Rightarrow A$}
    \DisplayProof
\end{enumerate}

sendo

$$\eta(C, B) \equiv 1_{C \land B}^{\ast}, \qquad (1_B \Rightarrow g) \equiv (g \mathcal{E}(C, D))^{\ast}$$

De forma equivalente também:

$h^{\ast} \equiv (1_B \Rightarrow h)\eta(C, B)$

Outras duas regras de inferência derivadas são:

\begin{center}
    \AxiomC{$A \xrightarrow{f} B$}
    \UnaryInfC{$T \xrightarrow{\lceil f \rceil} A \Rightarrow B$}
    \DisplayProof
    \AxiomC{$T \xrightarrow{g} A \Rightarrow B$}
    \LeftLabel{$\qquad$}
    \UnaryInfC{$A \xrightarrow{g^s} B$} 
    \DisplayProof
\end{center}

$$\lceil f \rceil \equiv (f \pi_1(1, A))^{\ast} \qquad g^s \equiv \mathcal{E}(B, A)\langle g \bigcirc_A, 1_A \rangle$$

\begin{definition}[Cálculo proposicional intuicionistico completo, \cite{lambek1988}]
    Um cálculo (proposicional) intuicionistico completo possui, além das regras para o cálculo positivo, regras para a falsidade e a disjunção, ou seja a formula $\bot$ e a operação $\lor$, junto com as seguintes setas adicionais:
    \begin{enumerate}
        \item[R5] $\bot \xrightarrow{\square_A } A$
        \item[R6a] $A \xrightarrow{\kappa (A, B)} A \lor B$
        \item[R6b] $B \xrightarrow{\kappa' (A, B)} A \lor B$
        \item[R6c] $(A \Rightarrow C) \land (B \Rightarrow C) \xrightarrow{\zeta^{C}(A, B)} (A \lor B) \Rightarrow C$
    \end{enumerate}
\end{definition}

A partir da regra R6c é possível derivar a regra:

\begin{enumerate}
    \item[R'6c] \AxiomC{$A \xrightarrow{f} C$} \AxiomC{$B \xrightarrow{f} C$}
                \BinaryInfC{$A \lor B \xrightarrow{[f, g]} C$}
                \DisplayProof
\end{enumerate}

Na seguinte forma: $$[f, g] \equiv (\zeta^{C}(A, B) \langle \lceil f \rceil, \lceil g \rceil  \rangle)^s$$

Visto pela árvore de derivação:

\begin{definition}[Cálculo proposicional clássico, \cite{lambek1988}]
    O calculo proposicional clássico parte do cálculo proposicional intuicionistico completo e adiciona a seguinte regra:
    \begin{enumerate}
        \item[R7] $(A \Rightarrow \bot) \Rightarrow \bot \to A$ 
    \end{enumerate}
\end{definition}

\subsubsection{O Teorema da Dedução}

O teorema da dedução usual fala que: de $A \land B \vdash C$ é possível deduzir $A \vdash B \Rightarrow C$. Esse resultado é incorporado em R4, com $\to$ no lugar de $\vdash$. Mas se contar a barra horizontal como um símbolo de dedução, é possível se perguntar sobre um teorema da dedução de ordem superior. 

Para isso, é necessário introduzir a noção de sistema dedutivo derivado, $\mathcal{L}$.

\begin{proposition}[Teorema da Dedução, \cite{lambek1988}]
    Em um cálculo de conjunção, ou  positivo, ou intuicionistico ou clássico, para cada prova $\phi(x) : B \to C$ vindo da suposição $x : T \to A$, existe uma prova associada $f : A \land B \to C$ em $\mathcal{L}$ que não depende de $x$.
\end{proposition}

$f$ será denotado por $\kappa_{x \in A}\phi(x)$, onde $x \in A$ denota que $x$ é do tipo $A$.

\emph{Prova}: Será dada uma prova para o cálculo positivo.

Toda prova $\phi(x) : B \to C$ vinda da suposição $x : T \to A$, deve ter uma das cinco formas:

\begin{enumerate}[label=(\roman*)]
    \item $k : B \to C$, uma prova em $\mathcal{L}$
    \item $x : T \to A$, com $B = T$ e $C = A$
    \item $\langle \psi(x), \chi(x) \rangle$ onde $\psi(x) : B \to C'$ e $\chi(x) : B \to C''$, $C = C' \land C''$
    \item $\chi(x)\psi(x)$, onde $\psi(x) : B \to D$ e $\chi : D \to C$
    \item $\psi(x)^{\ast}$, onde $\psi(x) : B \land C' \to C''$, $C = C' \Rightarrow C''$
\end{enumerate}

para cada caso, a prova $f$ requerida é a seguinte:

\begin{enumerate}[label=(\roman*)]
    \item $\kappa_{x \in A} k = k \pi_2(A, B)$
    \item $\kappa_{x \in A} x = \pi_1(A, T)$
    \item $\kappa_{x \in A} \langle \psi(x), \chi(x) \rangle = \langle \kappa_{x \in A} \psi(x), \kappa_{x \in A} \chi(x) \rangle$
    \item $\kappa_{x \in A}(\chi(x)\psi(x)) = \kappa_{x \in A} \chi(x) \langle \pi_1(A, B), \kappa_{x \in A} \psi(x) \rangle$
    \item $\kappa_{x \in A}\psi(x)^{\ast} = (\kappa_{x \in A} \psi(x) \alpha_{A, B, C})$
\end{enumerate}

Isso termina a prova. $\qed$

\subsubsection{Categorias Cartesianas Fechadas representadas equacionalmente}

A definição de sistemas dedutivos vista até então faz com que seja possível definir categorias da seguinte forma:

\begin{definition}[Categoria, \cite{lambek1988}]
    Uma \emph{categoria} é um sistema dedutivo onde as seguinte equações são válidas:
    \begin{enumerate}
        \item[E1] $f 1_A = f$, $1_B f = f$, $(hg)f = h(gf)$ 
    \end{enumerate}
    para todo $f: A \to B$, $g : B \to C$ e $h : C \to D$
\end{definition}

O uso da igualdade nesse caso é o mesmo que impor relações de equivalência entre as provas.

\begin{definition}[Categoria cartesiana, \cite{lambek1988}]
    Uma \emph{categoria cartesiana} é tanto uma categoria quando um cálculo de conjunção que satisfaz as seguintes equações:
    \begin{enumerate}
        \item[E2] $f = \bigcirc_A$, para todo $f : A \to T$
        \item[E3a] $\pi_1(A, B)\langle f, g \rangle = f$
        \item[E3b] $\pi_2(A, B)\langle f, g \rangle = g$
        \item[E3c] $\langle \pi_1(A, B) h, \pi_2(A, B) h \rangle = h$ para todo $f : C \to A$, $g : C \to B$ e $h : C \to A \land B$   
    \end{enumerate}
\end{definition}

A equação E2 coloca $T$ como objeto terminal. Nas categorias normalmente $T$ é escrito como $1$, o que será feito a partir de agora. Outra forma equivalente de escrever E2 é:

\begin{enumerate}
    \item[E'2] $1_1 = \bigcirc_1, \bigcirc_B f = \bigcirc_A$ para todo $f : A \to B$
\end{enumerate}

A equação E3 faz a construção do produto cartesiano, com suas projeções, que é normalmente denotado por $A \land B \equiv A \times B$

\begin{proposition}
    Como consequência de E3, se segue a lei distributiva:
    $$\langle f, g \rangle h = \langle fh, gh \rangle$$
    para todo $f : C \to A$, $g : C \to B$ e $h : D \to C$
\end{proposition}

\emph{Prova}: de forma equacional:

\begin{align*}
    \langle f, g \rangle h & = \langle \pi_1(\langle f, g \rangle h), \pi_2(\langle f, g \rangle h) \rangle \\
    & = \langle \pi_1(\langle f, g \rangle) h, \pi_2(\langle f, g \rangle) h \rangle \\
    & = \langle f h, g h \rangle \qed \\
\end{align*}

\begin{proposition}
    A operação de produto $\times : \mathcal{A} \times \mathcal{A} \to \mathcal{A}$ é um funtor
\end{proposition}

\emph{Prova}: primeiro, provando equacionalmente a identidade:

\begin{align*}
    1_A \times 1_C & = \langle 1_A \pi_1(A, C), 1_C \pi_2(A, C) \rangle \\
    & = \langle \pi_1(A, C), \pi_2(A, C) \rangle \\
    & = \langle \pi_1(A, C) 1_{A \times C}, \pi_2(A, C) 1_{A \times C} \rangle \\
    & = 1_{A \times C}
\end{align*}

Para a distribuição:

\begin{align*}
    (f \times g)(f' \times g') & = \langle f \pi_1, g \pi_2 \rangle \langle f' \pi_1, g' \pi_2 \rangle \\
    & = \langle f \pi_1  \langle f' \pi_1, g' \pi_2 \rangle, g \pi_2  \langle f' \pi_1, g' \pi_2 \rangle \rangle \\
    & = \langle f f' \pi_1, g g' \pi_2 \rangle \\
    & = f f' \times g g' \\ \qed
\end{align*}

\begin{definition}[Categoria cartesiana fechada, \cite{lambek1988}]
    Uma categoria cartesiana fechada é uma categoria cartesiana $\mathcal{A}$ com uma estrutura adicional R4 que satisfaz as equações adicionais:
    \begin{enumerate}
        \item[E4a] $\mathcal{E}_{A, B} \langle h^{\ast} \pi_1(C, B), \pi_2(C, B) \rangle = h$
        \item[E4b] $(\mathcal{E}_{A, B} \langle k \pi_1(C, B), \pi_2(C, B) \rangle)^{\ast} = k$
    \end{enumerate}
    Para todo $h : C \land B \to A$ e $k : C \to B \Rightarrow A$
\end{definition}

Logo, uma categoria cartesiana fechada é um cálculo proposicional intuicionistico positivo que satisfaz as equações E1-E4

Sendo $C \land B \equiv C \times B$ e $B \Rightarrow A \equiv A^B$, as equações E4 garantem que o mapeamento:

$$Hom(C \times B, A) \xrightarrow{\ast} Hom(C, A^B)$$

é uma correspondência um para um.

Disso, pode-se tirar a propriedade universal da seta $\mathcal{E}_{A, B} : A^B \times B \to A$ onde dada uma seta $h : C \times B \to A$ existe uma seta única $h^{\ast} : C \to A^B$ tal que $$\mathcal{E}_{A, B}(h^{\ast} \times 1_B) = h$$

Outra equação útil é a seguinte:

$$h^{\ast} k = (h \langle k \pi_1(D, B), \pi_2(D, B) \rangle)^{\ast}$$

onde $h : A \times B \to C$ e $k : D \to A$.

Prova:

\begin{align*}
    h^{\ast} k & = (\mathcal{E}_{A, B} \langle h^{\ast} k \pi_1, \pi_2 \rangle) \\
               & = (\mathcal{E}_{A, B} \langle h^{\ast} \pi_1, \pi_2 \rangle \langle k \pi_1, \pi_2 \rangle) \\
               & = (h \langle k \pi_1(D, B), \pi_2(D, B) \rangle)^{\ast}
\end{align*}

Outra bijeção importante é 

$$Hom(A, B) \cong Hom(1, B^A)$$

A estrutura da demonstração dessa propriedade é parecida com o que já foi feito anteriormente: sejam $f : A \to B$ e $g : 1 \to B^A$, o operador $\lceil f \rceil : 1 \to B^A$ e o operador $g^s : A \to B$ tais que:

$$\lceil f \rceil \equiv (f \pi_1(1, A))^{\ast} \qquad g^s \equiv \mathcal{E}_{B, A}\langle g \bigcirc_A, 1_A \rangle$$

tendo então que 

$$\lceil f \rceil^s = f \qquad \lceil g^s \rceil = g$$

% \subsubsection{Categorias Cartesianas Fechadas com coprodutos, equacionalmente}

% \subsubsection{Objetos de números naturais}

\end{document}